<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hyperliquid Analytics | trade.xyz</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <h1>Hyperliquid Analytics</h1>
                <p class="subtitle">Real-time perpetuals trading analytics | Powered by trade.xyz</p>
            </div>
            <div class="header-stats">
                <div class="stat-box">
                    <span class="stat-label">Last Updated</span>
                    <span class="stat-value" id="lastUpdate">-</span>
                </div>
                <div class="stat-box">
                    <span class="stat-label">Status</span>
                    <span class="stat-value status-indicator" id="status">
                        <span class="pulse"></span> Live
                    </span>
                </div>
            </div>
        </header>

        <!-- Platform Overview -->
        <section class="overview">
            <div class="card metric-card">
                <div class="card-header">
                    <h3>24h Volume</h3>
                </div>
                <div class="card-body">
                    <div class="metric-value" id="totalVolume">$0</div>
                    <div class="metric-subtitle">All markets</div>
                </div>
            </div>

            <div class="card metric-card">
                <div class="card-header">
                    <h3>Open Interest</h3>
                </div>
                <div class="card-body">
                    <div class="metric-value" id="totalOI">$0</div>
                    <div class="metric-subtitle">Total OI</div>
                </div>
            </div>

            <div class="card metric-card">
                <div class="card-header">
                    <h3>Active Markets</h3>
                </div>
                <div class="card-body">
                    <div class="metric-value" id="activeMarkets">0</div>
                    <div class="metric-subtitle">Trading pairs</div>
                </div>
            </div>

            <div class="card metric-card revenue-card">
                <div class="card-header">
                    <h3>Platform Revenue (24h)</h3>
                </div>
                <div class="card-body">
                    <div class="metric-value" id="platformRevenue">$0</div>
                    <div class="metric-subtitle">Real fee calculations</div>
                </div>
            </div>
        </section>

        <!-- Asset Categories -->
        <section class="platform-metrics">
            <div class="section-header">
                <h2>Asset Categories</h2>
                <p class="section-subtitle">Crypto perpetuals vs TradFi/Equity perpetuals breakdown</p>
            </div>

            <div class="metrics-grid">
                <div class="card metric-card">
                    <div class="card-header">
                        <h3>Crypto Perps</h3>
                    </div>
                    <div class="card-body">
                        <div class="metric-value" id="cryptoPerpsCount">0</div>
                        <div class="metric-subtitle" style="margin-top: 12px;">
                            Volume: <strong id="cryptoPerpsVolume">$0</strong><br>
                            OI: <strong id="cryptoPerpsOI">$0</strong>
                        </div>
                    </div>
                </div>

                <div class="card metric-card">
                    <div class="card-header">
                        <h3>TradFi/Equity Perps</h3>
                    </div>
                    <div class="card-body">
                        <div class="metric-value" id="tradfiPerpsCount">0</div>
                        <div class="metric-subtitle" style="margin-top: 12px;">
                            Volume: <strong id="tradfiPerpsVolume">$0</strong><br>
                            OI: <strong id="tradfiPerpsOI">$0</strong>
                        </div>
                    </div>
                </div>

                <div class="card metric-card">
                    <div class="card-header">
                        <h3>Fee Structure</h3>
                    </div>
                    <div class="card-body">
                        <div class="metric-subtitle" style="margin-top: 8px;">
                            <strong>Taker Fee:</strong> 0.045%<br>
                            <strong>Maker Rebate:</strong> 0.015%<br>
                            <strong>HIP-2 Multiplier:</strong> 2x
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- TradFi/Equity Perpetuals Detailed Analytics -->
        <section class="tradfi-analytics">
            <div class="section-header">
                <h2>TradFi/Equity Perpetuals - Detailed Analytics</h2>
                <p class="section-subtitle">Comprehensive tracking of all traditional finance perpetual contracts</p>
            </div>

            <!-- TradFi Overview Cards -->
            <div class="metrics-grid">
                <div class="card metric-card">
                    <div class="card-header">
                        <h3>Total TradFi Assets</h3>
                    </div>
                    <div class="card-body">
                        <div class="metric-value" id="tradfiAssetsCount">0</div>
                        <div class="metric-subtitle">Active equity perps</div>
                    </div>
                </div>

                <div class="card metric-card">
                    <div class="card-header">
                        <h3>TradFi 24h Volume</h3>
                    </div>
                    <div class="card-body">
                        <div class="metric-value" id="tradfiTotalVolume">$0</div>
                        <div class="metric-subtitle"><span id="tradfiVolumePct">0%</span> of total</div>
                    </div>
                </div>

                <div class="card metric-card">
                    <div class="card-header">
                        <h3>TradFi Open Interest</h3>
                    </div>
                    <div class="card-body">
                        <div class="metric-value" id="tradfiTotalOI">$0</div>
                        <div class="metric-subtitle"><span id="tradfiOIPct">0%</span> of total</div>
                    </div>
                </div>
            </div>

            <!-- Detailed TradFi Assets Table -->
            <div class="card table-card full-width">
                <div class="card-header">
                    <h3>All TradFi/Equity Perpetuals</h3>
                    <p class="card-subtitle">Real-time OI, volume, funding rates, and microstructure data</p>
                </div>
                <div class="card-body">
                    <table class="market-table">
                        <thead>
                            <tr>
                                <th>Asset</th>
                                <th>Price</th>
                                <th>24h Change</th>
                                <th>Volume (24h)</th>
                                <th>Vol %</th>
                                <th>Open Interest</th>
                                <th>OI %</th>
                                <th>Funding Rate</th>
                            </tr>
                        </thead>
                        <tbody id="tradfiAssetsTable">
                            <tr><td colspan="8" class="loading">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Granular Market Data -->
        <section class="granular-section">
            <div class="section-header">
                <h2>Market Charts</h2>
                <p class="section-subtitle">Granular timeframe analysis</p>
            </div>

            <!-- Asset Selector and Timeframe -->
            <div class="controls-panel">
                <div class="control-group">
                    <label for="assetSelect">Asset:</label>
                    <select id="assetSelect" class="input-select">
                        <option value="BTC">BTC</option>
                        <option value="ETH">ETH</option>
                        <option value="SOL">SOL</option>
                    </select>
                </div>
                <div class="control-group">
                    <label>Timeframe:</label>
                    <div class="timeframe-buttons">
                        <button class="timeframe-btn active" data-interval="15m">15m</button>
                        <button class="timeframe-btn" data-interval="1h">1h</button>
                        <button class="timeframe-btn" data-interval="4h">4h</button>
                        <button class="timeframe-btn" data-interval="1d">1d</button>
                    </div>
                </div>
            </div>

            <div class="charts-section">
                <div class="card chart-card">
                    <div class="card-header">
                        <h3>Price Chart</h3>
                    </div>
                    <div class="card-body">
                        <canvas id="priceChart"></canvas>
                    </div>
                </div>

                <div class="card chart-card">
                    <div class="card-header">
                        <h3>Volume Chart</h3>
                    </div>
                    <div class="card-body">
                        <canvas id="volumeChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Top Markets -->
        <section class="tables-section">
            <div class="card table-card full-width">
                <div class="card-header">
                    <h3>Top Markets by Volume</h3>
                </div>
                <div class="card-body">
                    <table class="market-table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Asset</th>
                                <th>Price</th>
                                <th>24h Change</th>
                                <th>Volume (24h)</th>
                                <th>Open Interest</th>
                                <th>Funding Rate</th>
                            </tr>
                        </thead>
                        <tbody id="topMarketsTable">
                            <tr><td colspan="7" class="loading">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- User Analytics -->
        <section class="user-analytics">
            <div class="section-header">
                <h2>User Analytics</h2>
                <p class="section-subtitle">Track individual wallet performance and trading activity</p>
            </div>

            <div class="controls-panel">
                <div class="control-group" style="flex: 1;">
                    <label for="walletAddress">Wallet Address:</label>
                    <input type="text" id="walletAddress" class="input-text" placeholder="0x... or username.eth">
                </div>
                <div class="control-group">
                    <label>Window:</label>
                    <select id="windowSelect" class="input-select">
                        <option value="day">Day</option>
                        <option value="week">Week</option>
                        <option value="month">Month</option>
                        <option value="allTime">All Time</option>
                    </select>
                </div>
                <button id="loadUserData" class="btn-primary">Load User Data</button>
            </div>

            <!-- User Metrics -->
            <div class="metrics-grid" id="userMetricsSection" style="display: none;">
                <div class="card metric-card">
                    <div class="card-header">
                        <h3>Account Value</h3>
                    </div>
                    <div class="card-body">
                        <div class="metric-value" id="userAccountValue">$0</div>
                        <div class="metric-subtitle">Current portfolio value</div>
                    </div>
                </div>

                <div class="card metric-card">
                    <div class="card-header">
                        <h3>Cumulative PnL</h3>
                    </div>
                    <div class="card-body">
                        <div class="metric-value" id="userCumulativePnL">$0</div>
                        <div class="metric-subtitle">Total realized + unrealized</div>
                    </div>
                </div>

                <div class="card metric-card">
                    <div class="card-header">
                        <h3>Total Volume</h3>
                    </div>
                    <div class="card-body">
                        <div class="metric-value" id="userTotalVolume">$0</div>
                        <div class="metric-subtitle">Trading volume</div>
                    </div>
                </div>

                <div class="card metric-card">
                    <div class="card-header">
                        <h3>Total Fees Paid</h3>
                    </div>
                    <div class="card-body">
                        <div class="metric-value" id="userFeesPaid">$0</div>
                        <div class="metric-subtitle">Lifetime fees</div>
                    </div>
                </div>
            </div>

            <!-- User Charts -->
            <div class="charts-section" id="userChartsSection" style="display: none;">
                <div class="card chart-card">
                    <div class="card-header">
                        <h3>Portfolio Value History</h3>
                    </div>
                    <div class="card-body">
                        <canvas id="portfolioChart"></canvas>
                    </div>
                </div>

                <div class="card chart-card">
                    <div class="card-header">
                        <h3>PnL Chart</h3>
                    </div>
                    <div class="card-body">
                        <canvas id="pnlChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- User Fills Table -->
            <div class="card table-card full-width" id="userFillsSection" style="display: none; margin-top: 30px;">
                <div class="card-header">
                    <h3>Recent Fills</h3>
                </div>
                <div class="card-body">
                    <table class="market-table">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Asset</th>
                                <th>Side</th>
                                <th>Price</th>
                                <th>Size</th>
                                <th>Value</th>
                                <th>Fee</th>
                                <th>Closed PnL</th>
                            </tr>
                        </thead>
                        <tbody id="userFillsTable">
                            <tr><td colspan="8" class="loading">No data loaded</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Advanced Analytics - Leaderboard -->
        <section class="leaderboard-section">
            <div class="section-header">
                <h2>Platform Analytics & Leaderboard</h2>
                <p class="section-subtitle">Top traders, large trades, and market microstructure analytics</p>
            </div>

            <!-- Controls -->
            <div class="controls-panel">
                <div class="control-group">
                    <label>Timeframe:</label>
                    <select id="leaderboardWindow" class="input-select">
                        <option value="24">24 Hours</option>
                        <option value="168">7 Days</option>
                        <option value="720">30 Days</option>
                    </select>
                </div>
                <button id="loadLeaderboardData" class="btn-primary">Refresh Analytics</button>
            </div>

            <!-- Top Traders Leaderboard -->
            <div class="card table-card full-width">
                <div class="card-header">
                    <h3>Top Traders Leaderboard</h3>
                    <p class="card-subtitle">Automatically populated from Hyperliquid leaderboard</p>
                </div>
                <div class="card-body">
                    <table class="market-table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Trader</th>
                                <th>Account Value</th>
                                <th>PnL</th>
                                <th>PnL %</th>
                                <th>Volume</th>
                                <th>Trades</th>
                            </tr>
                        </thead>
                        <tbody id="topTradersTable">
                            <tr><td colspan="7" class="loading">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Large Trades -->
            <div class="card table-card full-width">
                <div class="card-header">
                    <h3>Large & Interesting Trades</h3>
                    <p class="card-subtitle">Recent trades over $50k across top markets</p>
                </div>
                <div class="card-body">
                    <table class="market-table">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Asset</th>
                                <th>Side</th>
                                <th>Price</th>
                                <th>Size</th>
                                <th>Value (USD)</th>
                            </tr>
                        </thead>
                        <tbody id="largeTradesTable">
                            <tr><td colspan="6" class="loading">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Trade Size Analytics -->
            <div class="card table-card full-width">
                <div class="card-header">
                    <h3>Average Trade Size Analytics</h3>
                    <p class="card-subtitle">Trade size distribution across top markets</p>
                </div>
                <div class="card-body">
                    <table class="market-table">
                        <thead>
                            <tr>
                                <th>Asset</th>
                                <th>Total Trades</th>
                                <th>Avg Trade Size</th>
                                <th>Median Trade Size</th>
                                <th>Small Trades %</th>
                                <th>Medium Trades %</th>
                                <th>Large Trades %</th>
                            </tr>
                        </thead>
                        <tbody id="tradeSizeTable">
                            <tr><td colspan="7" class="loading">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>Real-time data from Hyperliquid API via trade.xyz | Updates every 10 seconds</p>
            <p>
                <a href="https://docs.trade.xyz/api/overview" target="_blank">API Documentation</a> |
                <a href="https://hyperliquid.xyz" target="_blank">Hyperliquid</a>
            </p>
        </footer>
    </div>

    <script src="js/dashboard.js"></script>
</body>
</html>
